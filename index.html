<!DOCTYPE html>

<html>
<head>

</head>

<body>
  <label for="user">your gh username:</label>
  <input type="text" name="user" id="user">
  <label for="pass">your gh password:</label>
  <input type="text" name="pass" id="pass">
  <label for="text">Text:</label>
  <input type="text" name="text" id="text">
  <button class="ibutton" onclick="test(document.getElementById('text').value, document.getElementById('user').value, document.getElementById('pass').value)">updatefile</button>
  
  
  <script>
    function test(input, user, pass)
    {
      const fs = require('fs');
	    const readline = require('readline');
    
      //init file stream
      const readStream = fs.createReadStream("test.txt", 
		    function(err) {if(err) {alert("Cannot read " + "test.txt");}});
      const readInterface = readline.createInterface({
        input: readStream,
        output: process.stdout,
        console: false});

      //read file
      var text = "";
      readInterface.on('line', function(line){
        text = text + line + "\n";
      });
      text = text + input;

      //github stuff
      var github = new Github({
        username: user,
        password: pass,
        auth: "basic"
      });

      var repo = github.getRepo("KeenanSegenchuk", "UptonAir");
    
      repository.write(
        "master",
        "test.txt",
        text,
        "test commit via api",
        function(err){if(err) {alert("err")}}
      );
    }
  </script>  
</body>
</html>
